class MudrecBrain {
  String answer(String input) {
    final q = input.trim().toLowerCase();
    if (q.isEmpty) return _wrap('Кажи ми што те мачи; ќе слушам мирно.');

    // Клучни теми
    if (_has(q, ['љубов', 'срце', 'романтика'])) {
      return _wrap('Љубовта не се моли — таа се живее тивко и верно. Кога е вистинска, се враќа сама.');
    }
    if (_has(q, ['болка', 'рана', 'тажно', 'тага'])) {
      return _wrap('Болката ја остри душата, а солзите ја перат. Не бегај; прегрни ја и ќе се роди светлина.');
    }
    if (_has(q, ['надеж', 'надева', 'верува'])) {
      return _wrap('Надежта е мост над водите на сомнежот. Чекори полека — брегот е поблиску од што мислиш.');
    }
    if (_has(q, ['вера', 'бог', 'исус'])) {
      return _wrap('Кога чекориш со вера, патеката се појавува под стапалата. Господ ја слуша молитвата што ја зборува срцето.');
    }
    if (_has(q, ['семејство', 'родители'])) {
      return _wrap('Семејството е коренот; од коренот расте сила и смирение. Чувај го со благодарност.');
    }
    if (_has(q, ['деца'])) {
      return _wrap('Детето е шепот на иднината. Расти го со добрина и стрпливост.');
    }
    if (_has(q, ['здравје', 'болест'])) {
      return _wrap('Здравјето е тивок дар. Слушај го телото, почитувај го ритамот на душата.');
    }
    if (_has(q, ['пријател', 'другар'])) {
      return _wrap('Пријателот не те штити од вистината — те држи додека ја слушаш.');
    }
    if (_has(q, ['сон', 'сонови', 'мечта'])) {
      return _wrap('Секој сон е семе. Посади го во труд и полевај со истрајност.');
    }
    if (_has(q, ['време', 'години'])) {
      return _wrap('Времето не лечи само по себе; лечи мудроста што ја собираме во него.');
    }
    if (_has(q, ['тишина', 'молк'])) {
      return _wrap('Во тишината се слушаат одговорите што зборовите ги кријат.');
    }
    if (_has(q, ['цар', 'цареви', 'престол'])) {
      return _wrap('И на престолот се седи немирно кога срцето е празно.');
    }
    if (_has(q, ['самовил', 'вили'])) {
      return _wrap('Самовилите доаѓаат каде што човекот се осмелил да мечтае чисто.');
    }
    if (_has(q, ['овчар', 'стадо'])) {
      return _wrap('Овчарот знае: тишината е најдобар чувар — на стадо и на мисли.');
    }

    // Општ мудрецки одговор
    return _wrap('Те слушам. Раскажи уште — во зборовите зрее одговорот.');
  }

  bool _has(String q, List<String> keys) => keys.any((k) => q.contains(k));

  String _wrap(String s) {
    // мал, смирен печат на мудрецот
    if (!s.endsWith('.') && !s.endsWith('!') && !s.endsWith('?')) s = '$s.';
    return s;
  }
}
